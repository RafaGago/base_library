/*
Autogenerated file by running:
scripts/autogenerator.sh -f source-generation/deadline.gen.h -r BITS=32,CLOCKNAME=timept32,INCLUDE_HDR=base/time.h,HDR_PREFIX=base/impl/generated/time -r BITS=64,CLOCKNAME=timept64,INCLUDE_HDR=base/time.h,HDR_PREFIX=base/impl/generated/time -r BITS=32,CLOCKNAME=sysclock32,INCLUDE_HDR=base/time.h,HDR_PREFIX=base/impl/generated/time -r BITS=64,CLOCKNAME=sysclock64,INCLUDE_HDR=base/time.h,HDR_PREFIX=base/impl/generated/time -r BITS=64,CLOCKNAME=cpu_timept,INCLUDE_HDR=time_extras/time_extras.h,HDR_PREFIX=time_extras/generated

Don't edit.
*/
/* AUTOGENERATE: include/bl/base/impl/generated/time/timept32_deadline.h */
/*---------------------------------------------------------------------------*/
#ifndef __BL_DEADLINE_TIMEPT32_H__
#define __BL_DEADLINE_TIMEPT32_H__

/* deadline/timeout usage pattern coded in a correct way */

#include <bl/base/time.h>
#include <bl/base/assert.h>
#include <bl/base/error.h>

/*---------------------------------------------------------------------------*/
/* deadline timept32 */
/*---------------------------------------------------------------------------*/
#if BL_TIMEPT32_BASE <= BL_NANOSECOND_BASE

static inline bl_err bl_timept32_deadline_init_nsec_explicit(
  bl_timept32* d, bl_timept32 now, bl_timeoft32 nsec
  )
{
  bl_assert (d);
  bl_assert (nsec <= bl_nsec_to_timept32_max());
  if (nsec <= bl_nsec_to_timept32_max()) {
    *d = now + bl_nsec_to_timept32 (nsec);
    return bl_mkok();
  }
  else {
    *d = 0;
    return bl_mkerr (bl_invalid);
  }
}
static inline bl_err
  bl_timept32_deadline_init_nsec (bl_timept32* d, bl_timeoft32 nsec)
{
  return bl_timept32_deadline_init_nsec_explicit(
    d, bl_timept32_get(), nsec
    );
}
#endif
/*---------------------------------------------------------------------------*/
#if BL_TIMEPT32_BASE <= BL_MICROSECOND_BASE

static inline bl_err bl_timept32_deadline_init_usec_explicit(
  bl_timept32* d, bl_timept32 now, bl_timeoft32 usec
  )
{
  bl_assert (d);
  bl_assert (usec <= bl_nsec_to_timept32_max());
  if (usec <= bl_usec_to_timept32_max()) {
    *d = now + bl_usec_to_timept32 (usec);
    return bl_mkok();
  }
  else {
    *d = 0;
    return bl_mkerr (bl_invalid);
  }
}

static inline bl_err
  bl_timept32_deadline_init_usec (bl_timept32* d, bl_timeoft32 usec)
{
  return bl_timept32_deadline_init_usec_explicit(
    d, bl_timept32_get(), usec
    );
}
#endif
/*---------------------------------------------------------------------------*/
#if BL_TIMEPT32_BASE <= BL_MILLISECOND_BASE

static inline bl_err bl_timept32_deadline_init_msec_explicit(
  bl_timept32* d, bl_timept32 now, bl_timeoft32 msec
  )
{
  bl_assert (d);
  bl_assert (msec <= bl_msec_to_timept32_max());
  if (msec <= bl_msec_to_timept32_max()) {
    *d = now + bl_msec_to_timept32 (msec);
    return bl_mkok();
  }
  else {
    *d = 0;
    return bl_mkerr (bl_invalid);
  }
}
static inline bl_err
  bl_timept32_deadline_init_msec (bl_timept32* d, bl_timeoft32 msec)
{
  return bl_timept32_deadline_init_msec_explicit(
    d, bl_timept32_get(), msec
    );
}
#endif
/*---------------------------------------------------------------------------*/
#if BL_TIMEPT32_BASE <= BL_SECOND_BASE

static inline bl_err bl_timept32_deadline_init_sec_explicit(
  bl_timept32* d, bl_timept32 now, bl_timeoft32 sec
  )
{
  bl_assert (d);
  bl_assert (sec <= bl_sec_to_timept32_max());
  if (sec <= bl_sec_to_timept32_max()) {
    *d = now + bl_sec_to_timept32 (sec);
    return bl_mkok();
  }
  else {
    *d = 0;
    return bl_mkerr (bl_invalid);
  }
}

static inline bl_err
  bl_timept32_deadline_init_sec (bl_timept32* d, bl_timeoft32 sec)
{
  return bl_timept32_deadline_init_sec_explicit(
    d, bl_timept32_get(), sec
    );
}
#endif
/*---------------------------------------------------------------------------*/
static inline bl_timept32diff bl_timept32_deadline_compare(
  bl_timept32 a, bl_timept32 b
  )
{
  return bl_timept32_get_diff (a, b);
}
/*---------------------------------------------------------------------------*/
static inline bl_timept32
  bl_timept32_deadline_min (bl_timept32 a, bl_timept32 b)
{
  return bl_timept32_deadline_compare (a, b) <= 0 ? a : b;
}
/*---------------------------------------------------------------------------*/
static inline bl_timept32
  bl_timept32_deadline_max (bl_timept32 a, bl_timept32 b)
{
  return bl_timept32_deadline_compare (a, b) >= 0 ? a : b;
}
/*---------------------------------------------------------------------------*/
static inline bool bl_timept32_deadline_expired_explicit(
  bl_timept32 d, bl_timept32 now
  )
{
  return bl_timept32_deadline_compare (d, now) <= 0;
}
/*---------------------------------------------------------------------------*/
static inline bool bl_timept32_deadline_expired (bl_timept32 d)
{
  return bl_timept32_deadline_expired_explicit (d, bl_timept32_get());
}
/*---------------------------------------------------------------------------*/

#endif /* #ifndef __BL_DEADLINE_TIMEPT32_H__ */
